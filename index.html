<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CAF PRO - Community Awareness Forum</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
:root{--main:#0b5394;--accent:#f1c232;--bg:#f4f6f8}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,Arial;background:var(--bg)}
header{background:var(--main);color:#fff;padding:20px;text-align:center}
nav{background:#fff;display:flex;flex-wrap:wrap;justify-content:center;gap:10px;padding:10px}
nav button{background:var(--main);color:#fff;border:none;padding:8px 14px;border-radius:6px;cursor:pointer}
section{background:#fff;margin:15px;padding:20px;border-radius:12px}
.hidden{display:none}
input,select,textarea,button{width:100%;padding:8px;margin:6px 0}
.id-card{width:320px;border:2px solid var(--main);border-radius:12px;padding:12px;margin:auto;text-align:center}
.id-card img{width:90px;height:90px;border-radius:50%;object-fit:cover}
@media print{
body *{visibility:hidden}
.printable,.printable *{visibility:visible}
.printable{position:absolute;top:20px;left:0;right:0}
}
</style>
</head>

<body>

<header>
<h1>COMMUNITY AWARENESS FORUM (CAF)</h1>
<p><strong>Motto:</strong> Educate, Aware and Better Community</p>
</header>

<nav>
<button onclick="show('home')">Home</button>
<button onclick="show('register')">Register</button>
<button onclick="show('login')">Login</button>
<button onclick="show('id')">My ID</button>
</nav>

<section id="home">
<h2>Welcome</h2>
<p>Welcome to Community Awareness Forum.</p>
</section>

<section id="register" class="hidden printable">
<h2>Membership Registration</h2>
<input id="rName" placeholder="Full Name">
<input id="rEmail" placeholder="Email">
<input type="password" id="rPass" placeholder="Password">
<input type="file" id="rPhoto" accept="image/*">
<button onclick="register()">Register</button>
<button onclick="window.print()">Print</button>
</section>

<section id="login" class="hidden">
<h2>Login</h2>
<input id="lEmail" placeholder="Email">
<input type="password" id="lPass" placeholder="Password">
<button onclick="login()">Login</button>
</section>

<section id="id" class="hidden printable">
<h2>CAF ID CARD</h2>
<div class="id-card">
<img id="idPhoto">
<p><strong>Name:</strong> <span id="idName"></span></p>
<p><strong>ID:</strong> <span id="idNo"></span></p>
<div id="qr"></div>
</div>
<button onclick="window.print()">Print ID</button>
</section>

<script>
let members = JSON.parse(localStorage.getItem("members")||"[]");
let currentUser=null;

function show(id){
document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}

function register(){
let name=rName.value,email=rEmail.value,pass=rPass.value,photo=rPhoto.files[0];
if(!name||!email||!pass||!photo){alert("Fill all fields");return;}
let reader=new FileReader();
reader.onload=()=>{
let id="CAF-"+Date.now();
members.push({name,email,pass,id,photo:reader.result});
localStorage.setItem("members",JSON.stringify(members));
alert("Registration successful");
show("login");
}
reader.readAsDataURL(photo);
}

function login(){
let email=lEmail.value,pass=lPass.value;
let user=members.find(u=>u.email===email&&u.pass===pass);
if(!user){alert("Invalid login");return;}
currentUser=user;
show("id");
idName.innerText=user.name;
idNo.innerText=user.id;
idPhoto.src=user.photo;
qr.innerHTML="";
new QRCode(qr,{text:user.id,width:100,height:100});
}
</script>

</body>
</html>

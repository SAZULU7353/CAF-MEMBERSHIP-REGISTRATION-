<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>COMMUNITY AWARENESS FORUM</title>
<style>
:root{
  --red:#dc2626; --black:#111; --yellow:#facc15; --orange:#f97316; --bg:#f3f4f6; --card:#fff;
}
*{box-sizing:border-box;}
body{margin:0;font-family:Arial,sans-serif;background:var(--bg);color:var(--black);}
header{background:linear-gradient(135deg,var(--red),var(--orange));color:#fff;text-align:center;padding:25px 10px;}
header h1{margin:0;font-size:28px;}
header p{margin:5px 0 0;font-size:14px;}
section{max-width:1100px;margin:20px auto;background:var(--card);padding:20px;border-radius:12px;box-shadow:0 10px 20px rgba(0,0,0,.08);}
.hidden{display:none;}
h2{color:var(--red);margin-top:0;}
input,textarea,select{width:100%;padding:10px;margin:6px 0;border-radius:6px;border:1px solid #cbd5e1;font-size:14px;}
button{padding:12px 18px;border:none;border-radius:8px;font-size:15px;cursor:pointer;color:#fff;background:var(--orange);margin-top:8px;}
button:hover{opacity:.9;}
button.secondary{background:var(--yellow);color:#000;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:15px;}
.hero{display:grid;grid-template-columns:1.2fr .8fr;gap:20px;align-items:center;}
.hero img{width:100%;border-radius:12px;min-height:220px;object-fit:cover;background:#e5e7eb;}
.id-card{width:350px;margin:auto;padding:20px;border-radius:16px;background:linear-gradient(135deg,var(--red),var(--yellow));color:#111;}
.id-card img{width:80px;height:80px;border-radius:6px;margin:5px;}
.id-card .logo{width:60px;height:60px;margin:5px;}
.id-card .box{background:#fff;color:#000;padding:8px;border-radius:6px;margin-top:10px;font-size:13px;}
.sign{margin-top:15px;border-top:1px solid #111;padding-top:5px;font-size:12px;display:flex;justify-content:space-between;}
.sign span{flex:1;text-align:center;}
.qr-code{width:80px;height:80px;margin:10px auto;background:#000;border-radius:6px;display:block;}
footer{text-align:center;margin-top:20px;font-size:13px;color:#64748b;}
#login{display:flex;justify-content:center;align-items:center;min-height:60vh;}
#login .login-card{background:#fff;padding:30px;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.15);width:300px;text-align:center;}
#login h2{margin-bottom:20px;color:var(--orange);}
#login input{margin-bottom:15px;}
#themeSelector{margin-bottom:15px;padding:6px;border-radius:6px;border:1px solid #cbd5e1;width:100%;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
table, th, td{border:1px solid #cbd5e1;}
th, td{padding:8px;text-align:center;}
</style>
</head>
<body><header>
<h1>COMMUNITY AWARENESS FORUM</h1>
<p>Building informed, united and empowered communities</p>
</header><!-- LOGIN --><section id="login">
<div class="login-card">
<h2>Login</h2>
<select id="themeSelector" onchange="changeTheme()">
<option value="default">Select Theme</option>
<option value="red">Red</option>
<option value="black">Black</option>
<option value="yellow">Yellow</option>
<option value="orange">Orange</option>
</select>
<input id="luser" placeholder="Username">
<input id="lpass" type="password" placeholder="Password">
<select id="loginType">
<option value="admin">Admin</option>
<option value="member">Member</option>
</select>
<button type="button" onclick="login()">Login</button>
</div>
</section><!-- DASHBOARD --><section id="dashboard" class="hidden">
<button onclick="logout()" style="float:right;background:red;">Logout</button>
<div class="hero">
<div>
<h2>Welcome to COMMUNITY AWARENESS FORUM</h2>
<p>View community activities, upcoming projects, and engage with your fellow members.</p>
<input type="file" id="galleryUpload" multiple onchange="addGalleryImages()">
</div>
<div id="gallery" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:10px;"></div>
</div>
<br>
<div class="grid">
<button onclick="show('register')">Membership Registration</button>
<button onclick="show('idcard')">My ID Card</button>
<button onclick="show('projects')">Forum Projects</button>
<button onclick="show('attendance')">Attendance</button>
<button onclick="show('pending')">Pending Approvals</button>
<button onclick="show('passwordChange')">Change Password</button>
</div>
<footer>All rights reserved &copy; CAF 2025</footer>
</section><!-- REGISTRATION --><section id="register" class="hidden print-form">
<h2>Membership Registration Form</h2>
<form id="regForm" onsubmit="return false;">
<div style="display:flex;gap:10px;">
<input type="file" id="passport" accept="image/*">
<input type="file" id="logo" accept="image/*">
</div>
<input placeholder="Full Name" id="fullname" required>
<input placeholder="Phone Number" id="phone" required>
<input placeholder="Email" id="email" required>
<input placeholder="Address" id="address" required>
<div>
<input type="checkbox" id="agree" required> I agree with the Terms, Constitution and Policies of CAF
</div>
<div class="sign">
<span>Chairman Signature</span>
<span>Secretary Signature</span>
</div>
<button onclick="submitRegistration()">Submit Registration (Pending Admin Approval)</button>
</form>
</section><!-- ID CARD --><section id="idcard" class="hidden print-id">
<h2>Member ID Card</h2>
<div class="id-card">
<div style="display:flex;justify-content:space-between;align-items:center;">
<img id="idPassport" src="" alt="Passport Photo">
<img id="idLogo" src="" alt="Forum Logo">
</div>
<p id="idName">Full Name (CAF)</p>
<div class="box">CAF ID: <span id="idCAFID">CAF-2025-001</span></div>
<div class="sign">
<span>Chairman</span>
<span>Member</span>
</div>
<div class="qr-code" id="qrCode"></div>
</div>
<button onclick="printID()">Print ID Card</button>
</section><!-- PENDING APPROVALS --><section id="pending" class="hidden">
<h2>Pending Member Approvals</h2>
<table id="pendingTable">
<tr><th>Full Name</th><th>Email</th><th>Approve</th></tr>
</table>
</section><!-- PROJECTS --><section id="projects" class="hidden">
<h2>Forum Projects</h2>
<ul id="projectList">
<li>Community sensitization campaigns</li>
<li>Youth engagement and leadership programs</li>
<li>Advocacy & outreach initiatives</li>
</ul>
</section><!-- ATTENDANCE --><section id="attendance" class="hidden">
<h2>Meeting Attendance</h2>
<input placeholder="Meeting Title">
<input type="date">
<input type="time">
<div style="height:50px;border:1px dashed #000;margin-top:10px;">Signature</div>
<button onclick="window.print()">Print Attendance</button>
</section><!-- PASSWORD CHANGE --><section id="passwordChange" class="hidden">
<h2>Change Password</h2>
<input type="password" id="oldPass" placeholder="Current Password">
<input type="password" id="newPass" placeholder="New Password">
<button onclick="changePassword()">Change Password</button>
</section><script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script><script>
let pendingMembers=[];
let approvedMembers=[];
let memberCount=0;
let currentUser=null;
let currentUserType=null;
const adminCreds={username:'cafreg',password:'caf2025'};

function login(){
  const username=document.getElementById('luser').value;
  const password=document.getElementById('lpass').value;
  const type=document.getElementById('loginType').value;

  if(type==='admin'){
    if(username===adminCreds.username && password===adminCreds.password){
      currentUser=username; currentUserType='admin'; showDashboard();
    } else {alert('Invalid admin credentials'); return;}
  } else {
    const member=approvedMembers.find(m=>m.email===username && m.password===password);
    if(member){
      currentUser=username; currentUserType='member'; generateIDCard(member); showDashboard();
    } else alert('Invalid member credentials or not approved yet');
  }
}

function logout(){
  currentUser=null; currentUserType=null;
  document.querySelectorAll('section').forEach(s=>s.classList.add('hidden'));
  document.getElementById('login').classList.remove('hidden');
}

function showDashboard(){
  document.querySelectorAll('section').forEach(s=>s.classList.add('hidden'));
  document.getElementById('dashboard').classList.remove('hidden');
}

function show(id){
  if(!currentUser){alert('Please login first'); return;}
  document.querySelectorAll('section').forEach(s=>s.classList.add('hidden'));
  document.getElementById('dashboard').classList.remove('hidden');
  document.getElementById(id).classList.remove('hidden');
}

function submitRegistration(){
  let member={
    fullname:document.getElementById('fullname').value,
    email:document.getElementById('email').value,
    phone:document.getElementById('phone').value,
    address:document.getElementById('address').value,
    passport:document.getElementById('passport').files[0],
    logo:document.getElementById('logo').files[0]
  };
  pendingMembers.push(member);
  alert('Registration submitted! Waiting for admin approval.');
  document.getElementById('regForm').reset();
  updatePendingTable();
}

function updatePendingTable(){
  const table=document.getElementById('pendingTable');
  table.innerHTML='<tr><th>Full Name</th><th>Email</th><th>Approve</th></tr>';
  pendingMembers.forEach((m,i)=>{
    let row=table.insertRow();
    row.insertCell(0).innerText=m.fullname;
    row.insertCell(1).innerText=m.email;
    let btn=document.createElement('button');
    btn.innerText='Approve';
    btn.onclick=()=>approveMember(i);
    row.insertCell(2).appendChild(btn);
  });
}

function approveMember(index){
  memberCount++;
  let member=pendingMembers.splice(index,1)[0];
  member.cafID='CAF-2025-'+String(memberCount).padStart(3,'0');
  member.password='member123';
  approvedMembers.push(member);
  alert('Member approved! CAF ID: '+member.cafID+' Default password: member123');
  updatePendingTable();
}

function generateIDCard(member){
  if(member.passport){
    let reader=new FileReader();
    reader.onload=e=>document.getElementById('idPassport').src=e.target.result;
    reader.readAsDataURL(member.passport);
  }
  if(member.logo){
    let reader=new FileReader();
    reader.onload=e=>document.getElementById('idLogo').src=e.target.result;
    reader.readAsDataURL(member.logo);
  }
  document.getElementById('idName').innerText=member.fullname+' (CAF)';
  document.getElementById('idCAFID').innerText=member.cafID;
  let qr=new QRious({element:document.getElementById('qrCode'),value:member.fullname+'|'+member.cafID});
}

function printID(){window.print();}
function addGalleryImages(){
  let files=document.getElementById('galleryUpload').files;
  let gallery=document.getElementById('gallery');
  gallery.innerHTML='';
  for(let f of files){
    let reader=new FileReader();
    reader.onload=function(e){
      let img=document.createElement('img');
      img.src=e.target.result;
      img.style.width='100%';
      img.style.borderRadius='8px';
      gallery.appendChild(img);
    }
    reader.readAsDataURL(f);
  }
}

function changeTheme(){
  let theme=document.getElementById('themeSelector').value;
  switch(theme){
    case 'red': document.body.style.background='#fee2e2'; document.body.style.color='#111'; break;
    case 'black': document.body.style.background='#111'; document.body.style.color='#fff'; break;
    case 'yellow': document.body.style.background='#fef9c3'; document.body.style.color='#111'; break;
    case 'orange': document.body.style.background='#ffedd5'; document.body.style.color='#111'; break;
    default: document.body.style.background='var(--bg)'; document.body.style.color='var(--black)';
  }
}

function changePassword(){
  const oldPass=document.getElementById('oldPass').value;
  const newPass=document.getElementById('newPass').value;
  if(currentUserType==='admin'){
    if(oldPass===adminCreds.password){ adminCreds.password=newPass; alert('Admin password changed');}
    else alert('Incorrect current password');
  } else {
    let member=approvedMembers.find(m=>m.email===currentUser);
    if(member.password===oldPass){ member.password=newPass; alert('Password changed');}
    else alert('Incorrect current password');
  }
}
</script></body>
</html>
